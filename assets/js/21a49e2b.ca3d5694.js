"use strict";(self.webpackChunkdeveloper_docs=self.webpackChunkdeveloper_docs||[]).push([[278],{3905:function(t,e,n){n.d(e,{Zo:function(){return p},kt:function(){return m}});var i=n(7294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var l=i.createContext({}),c=function(t){var e=i.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},p=function(t){var e=c(t.components);return i.createElement(l.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},u=i.forwardRef((function(t,e){var n=t.components,a=t.mdxType,o=t.originalType,l=t.parentName,p=s(t,["components","mdxType","originalType","parentName"]),u=c(n),m=a,f=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?i.createElement(f,r(r({ref:e},p),{},{components:n})):i.createElement(f,r({ref:e},p))}));function m(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s.mdxType="string"==typeof t?t:a,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1608:function(t,e,n){n.r(e),n.d(e,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var i=n(7462),a=n(3366),o=(n(7294),n(3905)),r=["components"],s={},l="Notifications",c={unversionedId:"notifications",id:"notifications",title:"Notifications",description:"Notifications are a way to update someone about the state of your app. For example, they can inform the user that a long running background process has been completed or a new message has arrived.",source:"@site/docs/notifications.md",sourceDirName:".",slug:"/notifications",permalink:"/docs/notifications",draft:!1,editUrl:"https://github.com/tau-OS/devdocs/blob/main/docs/notifications.md",tags:[],version:"current",frontMatter:{}},p={},d=[{value:"Sending Notifications",id:"sending-notifications",level:2},{value:"Buttons and Actions",id:"buttons-and-actions",level:2},{value:"Notification Priority",id:"notification-priority",level:2},{value:"Stale Notifications",id:"stale-notifications",level:2}],u={toc:d};function m(t){var e=t.components,n=(0,a.Z)(t,r);return(0,o.kt)("wrapper",(0,i.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"notifications"},"Notifications"),(0,o.kt)("p",null,"Notifications are a way to update someone about the state of your app. For example, they can inform the user that a long running background process has been completed or a new message has arrived."),(0,o.kt)("p",null,"Notifications should not be intrusive, or distracting."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Remember that users can disable notifications for specific applications, or globally. You should not rely exclusively on notifications."))),(0,o.kt)("p",null,"To add the ability to disable notifications, as well as insure delivery, add the following line to your desktop file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini",metastring:'title="my-app.desktop"',title:'"my-app.desktop"'},"X-GNOME-UsesNotifications=true\n")),(0,o.kt)("p",null,"When using notifications, it's important that your desktop file has the same name as your application's ID. This is because the desktop file provide notification persistence, allowing the desktop to associate the notification to the application even if the application is not running."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If you don't have a desktop file whose name matches the application id, your notification might not be displayed."))),(0,o.kt)("h2",{id:"sending-notifications"},"Sending Notifications"),(0,o.kt)("p",null,"To send a notification, first create a new ",(0,o.kt)("inlineCode",{parentName:"p"},"GNotification")," object, and add your notification data to it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vala",metastring:'title="application.vala"',title:'"application.vala"'},'var notification = new Notification ("Hello World");\nnotification.set_body ("This is my first notification!");\n\n// Optional: Add an icon. By default, your app icon will be used\nvar file = new File.for_path ("an-image.png");\nvar icon = new FileIcon (file);\nnotification.set_icon (icon);\n')),(0,o.kt)("p",null,"To show your notification, just use the ",(0,o.kt)("inlineCode",{parentName:"p"},"send_notification")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vala",metastring:'title="application.vala"',title:'"application.vala"'},'application.send_notification ("my-app", notification);\n')),(0,o.kt)("p",null,"You need to provide an id for your notification here. This can be used if you want to make updates to an existing notification: simply send a notification with the same id."),(0,o.kt)("p",null,"Note that the title should be short; the body can be longer, say a paragraph. The icon may be displayed at a small size (say, 24\xd724), so choose an icon that is remains readable at small size."),(0,o.kt)("h2",{id:"buttons-and-actions"},"Buttons and Actions"),(0,o.kt)("p",null,"You can also add buttons to notifications that will trigger actions defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"app")," namespace. To learn more about creating actions, visit ",(0,o.kt)("a",{parentName:"p",href:"https://developer.gnome.org/documentation/tutorials/actions.html"},"the GNOME documentation"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vala",metastring:'title="application.vala"',title:'"application.vala"'},'notification.add_button ("View More Details", "app.do_a_thing");\n')),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Notifications can't trigger actions defined in other namespaces, like ",(0,o.kt)("inlineCode",{parentName:"p"},"win"),"."))),(0,o.kt)("h2",{id:"notification-priority"},"Notification Priority"),(0,o.kt)("p",null,"Notifications also have priority. For example, when a notification is set as ",(0,o.kt)("inlineCode",{parentName:"p"},"URGENT")," it will stay on the screen until either the user interacts with it, or you withdraw it. To make an urgent notification, add the following line:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vala",metastring:'title="application.vala"',title:'"application.vala"'},"notification.set_priority (NotificationPriority.URGENT);\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"URGENT")," notifications should really only be used on the most extreme cases."),(0,o.kt)("p",null,"There are also other notification priorities:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vala",metastring:'title="application.vala"',title:'"application.vala"'},"// Used for notifications that do not require immediate attention - typically used for contextual background information, such as contact birthdays or local weather\nnotification.set_priority (NotificationPriority.LOW);\n\n// The default priority, to be used for the majority of notifications (for example email messages, software updates, completed download/sync operations)\nnotification.set_priority (NotificationPriority.NORMAL);\n\n// Used for events that require more attention, usually because responses are time-sensitive (for example chat and SMS messages or alarms)\nnotification.set_priority (NotificationPriority.HIGH);\n")),(0,o.kt)("h2",{id:"stale-notifications"},"Stale Notifications"),(0,o.kt)("p",null,"Sometimes notifications no longer become relevant. In that scenario, you can explicitly withdraw it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vala",metastring:'title="application.vala"',title:'"application.vala"'},'application.withdraw_notification ("my-app");\n')))}m.isMDXComponent=!0}}]);